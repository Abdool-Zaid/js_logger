<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="a simple time logger for capturing the elapse time spent working in a day made by aspiring developer Abdool Zaid Toorabally email: aztoorabally7447@gmail.com">
    <title>time logger</title>
</head>
<body>
    <button id="init">start</button>
    <button id="pause">pause</button>
    <button id="res">get logs</button>
</body>
<script>
    let init={}
        init.val=window.localStorage.init? JSON.parse(window.localStorage.init) : false
        init.corpus= document.querySelector("#init")
        init.text=['stop','start']
        init.func= (self)=>{
           time.push([self.corpus.innerHTML,self.time])
        }
        let pause ={}
        pause.val = window.localStorage.pause? JSON.parse(window.localStorage.pause) : false
        pause.corpus= document.querySelector("#pause")
        pause.text= ['resume', 'pause']
        pause.func=(self)=>{
            time.push([self.corpus.innerHTML,self.time])
        }
        let res = {}
        res.val= window.localStorage.res? JSON.parse(window.localStorage.res) : false
        res.corpus= document.querySelector('#res')
        res.text=[ 'get logs', 'get logs']
        res.func=(self)=>{console.log(self.val)}
        let time = []
        let report
        btn = document.querySelectorAll('button')
        btn.forEach(element => {
            let val 
            try {
                
                eval(`val = JSON.parse(window.localStorage.${element.id})`)
            } catch (error) {
                console.error(error)
            }
            if (val){
                if (val == true){
                    let obj
                                eval(`obj= ${element.id}`)
                                element.innerHTML=obj.text[0]
                            }        
                        }
                    });
                    
                    window.addEventListener('click',(e)=>{
                        if(e.target.id != false){
                            let obj 
                            eval(`obj= ${e.target.id}`)
                            obj.time= Date.now()
                            
                            obj.func(obj)
                            if (obj.val==false){
                                obj.corpus.innerHTML= obj.text[0]
                            }else{
                                obj.corpus.innerHTML= obj.text[1]
                            }
                            obj.val= !obj.val
                            window.localStorage.setItem(e.target.id,JSON.stringify(obj.val))
                            
                            console.table(time)
                        }else{
                            console.log("miss")
                        }
                    })



//     fin.addEventListener('click',()=>{
//         navigator.clipboard
//   .writeText("Text")
//   .then(() => alert('logs copied to clipboard'))
//   .catch((err) => console.log(err))
//     })

</script>
</html>